<!DOCTYPE html>
<body>  
  <script>
    // http://www.ruanyifeng.com/blog/2020/12/fetch-tutorial.html

    async function fetchGet1() {
      const url = new URL("https://httpbin.org/get")      
      const headers = {
        accept: 'application/json',
      }
      const params = { a: 1, b: 2 }
      Object.keys(params).forEach(key => url.searchParams.append(key, params[key]))
      const response = await fetch(url, {
        headers,
      })
      const json = await response.json()
      console.log(json)
    }

    async function fetchPost1() {
      const url = 'https://httpbin.org/post'
      const headers = {
        'Content-Type': 'application/json;charset=utf-8',
      }
      const data = { a: 1, b: 2 }
      const response = await fetch(url, {
        method: 'POST',
        headers,
        body: JSON.stringify(data)
      })
      const json = await response.json()
      console.log(json)
    }

    async function fetchPost2() {
      const url = 'https://httpbin.org/post'
      const headers = {
        "Content-type": "application/x-www-form-urlencoded; charset=UTF-8",
      }
      const response = await fetch(url, {
        method: 'POST',
        headers,
        body: 'a=1&b=2',
        referrer: "about:client",
      })
      const json = await response.json()
      console.log(json)
    }

    fetchGet1()
    fetchPost1()
    fetchPost2()
  </script>
</body>
</html>